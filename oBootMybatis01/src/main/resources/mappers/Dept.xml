<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oracle.oBootMybatis01.DeptMapper">

	<!-- 커서에 사용. resultMap을 쓸 때.. -->
	<resultMap type="Dept" id="DeptResult">
		<result property="deptno" column="deptno" />
		<result property="dname" column="dname" />
		<result property="loc" column="loc" />
	</resultMap>

	<select id="tkSelectDept" resultType="Dept">
		<!--원랜 Dept로 썼는데 오류나서, configuration.xml에 써있는걸 가져옴 com.oracle.oBootMybatis01.model.Dept 
			또는 configuration.xml에서 alias 등록해서.. Dept로 다시 -->
		select * from dept
	</select>


 <!-- 웹 통한 테이블넣기 -->
	<select id="procDeptInsert" parameterType="DeptVO"
		statementType="CALLABLE">
		{<!-- 이 중괄호는 안넣어도 되나 여기선 fm -->
		call Dept_Insert3(											<!-- 호출 -->
		#{deptno, mode=IN, jdbcType=INTEGER}
		#{dname, mode=IN, jdbcType=VARCHAR}
		,#{loc, mode=IN, jdbcType=VARCHAR}
		,#{odeptno,mode=OUT, jdbcType=INTEGER}
		,#{odname, mode=OUT, jdbcType=VARCHAR}
		,#{oloc, mode=OUT, jdbcType=VARCHAR}
		)
		}
	</select>

<!-- 커서 -->
<select id="procDeptList" parameterType="java.util.Map" statementType="CALLABLE">
	{
		call Dept_Cursor3 (
			#{sDeptno, mode=IN, jdbcType=INTEGER}
			,#{eDeptno, mode=IN, jdbcType=INTEGER}
			,#{dept, mode=OUT, jdbcType=CURSOR 
			<!-- dept가 맵, 그리고 커서 안엔 가져오는 30-54까지의 4개가 들어감 -->
			,	javaType=java.sql.ResultSet
			,	resultMap=DeptResult}
		)
	}
</select>


</mapper>